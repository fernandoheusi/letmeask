{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ferna/Documents/HTML/NLW/Aulas/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ferna/Documents/HTML/NLW/Aulas/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ferna/Documents/HTML/NLW/Aulas/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{useHistory}from'react-router-dom';import logoImg from\"../assets/images/logo.svg\";import illustration from\"../assets/images/illustration.svg\";import googleIconImg from\"../assets/images/google-icon.svg\";import{database}from'../services/firebase';import{Button}from'../components/Button';import{useAuth}from'../hooks/useAuth';import'../styles/auth.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function Home(){var history=useHistory();var _useAuth=useAuth(),user=_useAuth.user,signInWithGoogle=_useAuth.signInWithGoogle;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),roomCode=_useState2[0],setRoomCode=_useState2[1];function handleCreatRoom(){return _handleCreatRoom.apply(this,arguments);}function _handleCreatRoom(){_handleCreatRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(user){_context.next=3;break;}_context.next=3;return signInWithGoogle();case 3:history.push('/rooms/new');case 4:case\"end\":return _context.stop();}}},_callee);}));return _handleCreatRoom.apply(this,arguments);}function handleJoinRoom(_x){return _handleJoinRoom.apply(this,arguments);}function _handleJoinRoom(){_handleJoinRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var roomRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(roomCode.trim()==='')){_context2.next=3;break;}return _context2.abrupt(\"return\");case 3:_context2.next=5;return database.ref(\"rooms/\".concat(roomCode)).get();case 5:roomRef=_context2.sent;if(roomRef.exists()){_context2.next=9;break;}alert('Room does not exists');return _context2.abrupt(\"return\");case 9:if(!roomRef.val().endedAt){_context2.next=12;break;}alert('Room already closed :(');return _context2.abrupt(\"return\");case 12:history.push(\"/rooms/\".concat(roomCode));case 13:case\"end\":return _context2.stop();}}},_callee2);}));return _handleJoinRoom.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"page-auth\",children:[/*#__PURE__*/_jsxs(\"aside\",{children:[/*#__PURE__*/_jsx(\"img\",{src:illustration,alt:\"Ilustra\\xE7\\xE3o simbolizando perguntas e respostas\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Crie salas de Q&A ao-vivo\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Tire as d\\xFAvidas da sua audi\\xEAncia em tempo-real\"})]}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"letmeask\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleCreatRoom,className:\"creat-room\",children:[/*#__PURE__*/_jsx(\"img\",{src:googleIconImg,alt:\"Logo do Google\"}),\"Crie a sua sala com o Google\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"separator\",children:\"ou entre em uma sala\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleJoinRoom,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Digite o codigo da sala\",onChange:function onChange(event){return setRoomCode(event.target.value);},value:roomCode}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Entrar na sala\"})]})]})})]});}","map":{"version":3,"sources":["C:/Users/ferna/Documents/HTML/NLW/Aulas/letmeask/src/pages/Home.tsx"],"names":["useState","useHistory","database","Button","useAuth","Home","history","user","signInWithGoogle","roomCode","setRoomCode","handleCreatRoom","push","handleJoinRoom","event","preventDefault","trim","ref","get","roomRef","exists","alert","val","endedAt","illustration","logoImg","googleIconImg","target","value"],"mappings":"kfAAA,OAAoBA,QAApB,KAAoC,OAApC,CACA,OAAQC,UAAR,KAAyB,kBAAzB,C,uKAMA,OAASC,QAAT,KAAyB,sBAAzB,CAEA,OAASC,MAAT,KAAuB,sBAAvB,CACA,OAASC,OAAT,KAAwB,kBAAxB,CAEA,MAAO,qBAAP,C,wFAEA,MAAO,SAASC,CAAAA,IAAT,EAAe,CACrB,GAAMC,CAAAA,OAAO,CAAGL,UAAU,EAA1B,CADqB,aAEYG,OAAO,EAFnB,CAEbG,IAFa,UAEbA,IAFa,CAERC,gBAFQ,UAERA,gBAFQ,eAGUR,QAAQ,CAAC,EAAD,CAHlB,wCAGdS,QAHc,eAGLC,WAHK,uBAKNC,CAAAA,eALM,uJAKrB,sIACKJ,IADL,+CAEQC,CAAAA,gBAAgB,EAFxB,QAICF,OAAO,CAACM,IAAR,CAAa,YAAb,EAJD,sDALqB,0DAYNC,CAAAA,cAZM,sJAYrB,kBAA8BC,KAA9B,kIACCA,KAAK,CAACC,cAAN,GADD,KAGKN,QAAQ,CAACO,IAAT,KAAoB,EAHzB,2FAOuBd,CAAAA,QAAQ,CAACe,GAAT,iBAAsBR,QAAtB,GAAkCS,GAAlC,EAPvB,QAOOC,OAPP,mBASMA,OAAO,CAACC,MAAR,EATN,0BAUEC,KAAK,CAAC,sBAAD,CAAL,CAVF,6CAcKF,OAAO,CAACG,GAAR,GAAcC,OAdnB,2BAeEF,KAAK,CAAC,wBAAD,CAAL,CAfF,0CAmBCf,OAAO,CAACM,IAAR,kBAAuBH,QAAvB,GAnBD,yDAZqB,iDAiCrB,mBACC,aAAK,EAAE,CAAC,WAAR,wBACC,sCACC,YAAK,GAAG,CAAEe,YAAV,CAAwB,GAAG,CAAC,qDAA5B,EADD,cAEC,qDAFD,cAGC,2EAHD,GADD,cAMC,mCAEC,aAAK,SAAS,CAAC,cAAf,wBACC,YAAK,GAAG,CAAEC,OAAV,CAAmB,GAAG,CAAC,UAAvB,EADD,cAEC,gBAAQ,OAAO,CAAEd,eAAjB,CAAkC,SAAS,CAAC,YAA5C,wBACC,YAAK,GAAG,CAAEe,aAAV,CAAyB,GAAG,CAAC,gBAA7B,EADD,kCAFD,cAMC,YAAK,SAAS,CAAC,WAAf,kCAND,cAOC,cAAM,QAAQ,CAAEb,cAAhB,wBACC,cACC,IAAI,CAAC,MADN,CAEC,WAAW,CAAC,yBAFb,CAGC,QAAQ,CAAE,kBAAAC,KAAK,QAAGJ,CAAAA,WAAW,CAACI,KAAK,CAACa,MAAN,CAAaC,KAAd,CAAd,EAHhB,CAIC,KAAK,CAAEnB,QAJR,EADD,cAOC,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,4BAPD,GAPD,GAFD,EAND,GADD,CA+BA","sourcesContent":["import { FormEvent, useState } from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nimport logoImg from '../assets/images/logo.svg';\r\nimport illustration from '../assets/images/illustration.svg';\r\nimport googleIconImg from '../assets/images/google-icon.svg';\r\n\r\nimport { database } from '../services/firebase';\r\n\r\nimport { Button } from '../components/Button';\r\nimport { useAuth } from '../hooks/useAuth';\r\n\r\nimport '../styles/auth.scss';\r\n\r\nexport function Home(){\r\n\tconst history = useHistory();\r\n\tconst { user,signInWithGoogle }= useAuth();\r\n\tconst [roomCode,setRoomCode] = useState('')\r\n\r\n\tasync function handleCreatRoom(){\r\n\t\tif(!user){\r\n\t\t\tawait signInWithGoogle();\r\n\t\t}\r\n\t\thistory.push('/rooms/new');\r\n\t}\r\n\r\n\tasync function handleJoinRoom(event: FormEvent){\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif (roomCode.trim() === ''){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst roomRef = await database.ref(`rooms/${roomCode}`).get(); //o .get() retorna todos os dados da sala\r\n\r\n\t\tif (!roomRef.exists()){\r\n\t\t\talert('Room does not exists');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (roomRef.val().endedAt) {\r\n\t\t\talert('Room already closed :(')\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\thistory.push(`/rooms/${roomCode}`);\r\n\t}\r\n\treturn (\r\n\t\t<div id=\"page-auth\">\r\n\t\t\t<aside>\r\n\t\t\t\t<img src={illustration} alt=\"Ilustração simbolizando perguntas e respostas\" />\r\n\t\t\t\t<strong>Crie salas de Q&amp;A ao-vivo</strong>\r\n\t\t\t\t<p>Tire as dúvidas da sua audiência em tempo-real</p>\r\n\t\t\t</aside>\r\n\t\t\t<main>\r\n\t\t\t\t{/*<h1>{value}</h1>*/}\r\n\t\t\t\t<div className=\"main-content\">\r\n\t\t\t\t\t<img src={logoImg} alt=\"letmeask\"/>\r\n\t\t\t\t\t<button onClick={handleCreatRoom} className=\"creat-room\">\r\n\t\t\t\t\t\t<img src={googleIconImg} alt=\"Logo do Google\" />\r\n\t\t\t\t\t\tCrie a sua sala com o Google\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<div className=\"separator\">ou entre em uma sala</div>\r\n\t\t\t\t\t<form onSubmit={handleJoinRoom}>\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tplaceholder=\"Digite o codigo da sala\"\r\n\t\t\t\t\t\t\tonChange={event=> setRoomCode(event.target.value)}\r\n\t\t\t\t\t\t\tvalue={roomCode}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Button type=\"submit\">\r\n\t\t\t\t\t\t\tEntrar na sala\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</main>\r\n\t\t</div>\r\n\t)\r\n}"]},"metadata":{},"sourceType":"module"}