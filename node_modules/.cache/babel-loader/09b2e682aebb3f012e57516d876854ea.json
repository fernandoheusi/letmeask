{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ferna/Documents/HTML/NLW/Aulas/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ferna/Documents/HTML/NLW/Aulas/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useHistory,useParams}from'react-router-dom';import logoImg from\"../assets/images/logo.svg\";import deleteImg from\"../assets/images/delete.svg\";import checkImg from\"../assets/images/check.svg\";import answerImg from\"../assets/images/answer.svg\";import{Button}from'../components/Button';import{Question}from'../components/Question';import{RoomCode}from'../components/roomCode';// import { useAuth } from '../hooks/useAuth';\nimport{useRoom}from'../hooks/useRoom';import{database}from'../services/firebase';import'../styles/room.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function AdminRoom(){// const {user} = useAuth();\nvar history=useHistory();var params=useParams();var roomId=params.id;var _useRoom=useRoom(roomId),questions=_useRoom.questions,title=_useRoom.title;console.log(questions);function handleEndRoom(){return _handleEndRoom.apply(this,arguments);}function _handleEndRoom(){_handleEndRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return database.ref(\"rooms/\".concat(roomId)).update({endedAt:new Date()});case 2:history.push('/');case 3:case\"end\":return _context.stop();}}},_callee);}));return _handleEndRoom.apply(this,arguments);}function handleDeleteQuestion(_x){return _handleDeleteQuestion.apply(this,arguments);}function _handleDeleteQuestion(){_handleDeleteQuestion=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(questionId){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.confirm('Tem certeza que deseja excluir essa pergunta?')){_context2.next=3;break;}_context2.next=3;return database.ref(\"rooms/\".concat(roomId,\"/questions/\").concat(questionId)).remove();case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _handleDeleteQuestion.apply(this,arguments);}function handleCheckQuestionAsAnswered(_x2){return _handleCheckQuestionAsAnswered.apply(this,arguments);}function _handleCheckQuestionAsAnswered(){_handleCheckQuestionAsAnswered=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(questionId){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return database.ref(\"rooms/\".concat(roomId,\"/questions/\").concat(questionId)).update({isAnswered:true});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _handleCheckQuestionAsAnswered.apply(this,arguments);}function handleHighLightQuestion(_x3){return _handleHighLightQuestion.apply(this,arguments);}function _handleHighLightQuestion(){_handleHighLightQuestion=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(questionId){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return database.ref(\"rooms/\".concat(roomId,\"/questions/\").concat(questionId)).update({isHighlighted:true});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _handleHighLightQuestion.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"page-room\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"Letmeask\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(RoomCode,{code:roomId}),/*#__PURE__*/_jsx(Button,{isOutlined:true,onClick:handleEndRoom,children:\"Encerrar Sala\"})]})]})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"room-title\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Sala \",title]}),questions.length>0&&/*#__PURE__*/_jsxs(\"span\",{children:[questions.length,\" peguntas\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"question-list\",children:questions.map(function(question){return/*#__PURE__*/_jsx(Question,{content:question.content,author:question.author,isAnswered:question.isAnswered,isHighlighted:question.isHighlighted,children:!question.isAnswered&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleCheckQuestionAsAnswered(question.id);},children:/*#__PURE__*/_jsx(\"img\",{src:checkImg,alt:\"Marcar pergunta como respondida\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleHighLightQuestion(question.id);},children:/*#__PURE__*/_jsx(\"img\",{src:answerImg,alt:\"Dar destaque \\xE0 pergunta\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleDeleteQuestion(question.id);},children:/*#__PURE__*/_jsx(\"img\",{src:deleteImg,alt:\"Remover pergunta\"})})]})},question.id);})})]})]});}","map":{"version":3,"sources":["C:/Users/ferna/Documents/HTML/NLW/Aulas/letmeask/src/pages/AdminRoom.tsx"],"names":["useHistory","useParams","Button","Question","RoomCode","useRoom","database","AdminRoom","history","params","roomId","id","questions","title","console","log","handleEndRoom","ref","update","endedAt","Date","push","handleDeleteQuestion","questionId","window","confirm","remove","handleCheckQuestionAsAnswered","isAnswered","handleHighLightQuestion","isHighlighted","logoImg","length","map","question","content","author","checkImg","answerImg","deleteImg"],"mappings":"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","sourcesContent":["import {useHistory, useParams} from 'react-router-dom';\r\nimport logoImg from '../assets/images/logo.svg';\r\nimport deleteImg from '../assets/images/delete.svg'\r\n\r\nimport checkImg from '../assets/images/check.svg';\r\nimport answerImg from '../assets/images/answer.svg';\r\nimport { Button } from '../components/Button';\r\nimport { Question } from '../components/Question';\r\nimport { RoomCode } from '../components/roomCode';\r\n// import { useAuth } from '../hooks/useAuth';\r\nimport { useRoom } from '../hooks/useRoom';\r\nimport { database } from '../services/firebase';\r\n\r\nimport '../styles/room.scss'\r\n\r\ntype RoomParams = {\r\n\tid: string;\r\n}\r\n\r\nexport function AdminRoom(){\r\n\t// const {user} = useAuth();\r\n\tconst history = useHistory()\r\n\tconst params = useParams<RoomParams>();\r\n\tconst roomId = params.id;\r\n\r\n\tconst {questions,title} = useRoom(roomId);\r\n\r\n\tconsole.log(questions);\r\n\r\n\tasync function handleEndRoom() {\r\n\t\tawait database.ref(`rooms/${roomId}`).update({\r\n\t\t\tendedAt: new Date(),\r\n\t\t})\r\n\r\n\t\thistory.push('/');\r\n\t}\r\n\r\n\tasync function handleDeleteQuestion(questionId: string){\r\n\t\tif (window.confirm('Tem certeza que deseja excluir essa pergunta?')) {\r\n\t\t\tawait database.ref(`rooms/${roomId}/questions/${questionId}`).remove();\r\n\t\t}\r\n\t}\r\n\r\n\tasync function handleCheckQuestionAsAnswered(questionId: string){\r\n\t\t\tawait database.ref(`rooms/${roomId}/questions/${questionId}`).update({\r\n\t\t\t\tisAnswered: true,\r\n\t\t\t});\r\n\t}\r\n\r\n\tasync function handleHighLightQuestion(questionId: string){\r\n\t\t\tawait database.ref(`rooms/${roomId}/questions/${questionId}`).update({\r\n\t\t\t\tisHighlighted: true,\r\n\t\t\t});\r\n\t}\r\n\r\n\treturn(\r\n\t\t<div id=\"page-room\">\r\n\t\t\t<header>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<img src={logoImg} alt=\"Letmeask\" />\r\n\t\t\t\t\t<div >\r\n\t\t\t\t\t\t<RoomCode code={roomId}/>\r\n\t\t\t\t\t\t<Button isOutlined onClick={handleEndRoom}>Encerrar Sala</ Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</header>\r\n\t\t\t<main >\r\n\t\t\t\t<div className=\"room-title\">\r\n\t\t\t\t\t<h1>Sala {title}</h1>\r\n\t\t\t\t\t{ questions.length > 0 && <span>{questions.length} peguntas</span>}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"question-list\">\r\n\t\t\t\t\t{questions.map( question => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Question \r\n\t\t\t\t\t\t\tkey={question.id}\r\n\t\t\t\t\t\t\tcontent={question.content}\r\n\t\t\t\t\t\t\tauthor={question.author}\r\n\t\t\t\t\t\t\tisAnswered={question.isAnswered}\r\n\t\t\t\t\t\t\tisHighlighted={question.isHighlighted}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{!question.isAnswered && (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={()=> handleCheckQuestionAsAnswered(question.id)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={checkImg} alt=\"Marcar pergunta como respondida\" />\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={()=> handleHighLightQuestion(question.id)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={answerImg} alt=\"Dar destaque à pergunta\" />\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={()=>handleDeleteQuestion(question.id)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={deleteImg} alt=\"Remover pergunta\" />\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Question>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</main>\r\n\t\t</div>\r\n\t);\r\n}"]},"metadata":{},"sourceType":"module"}